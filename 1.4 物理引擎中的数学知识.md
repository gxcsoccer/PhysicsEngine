创造一个物理引擎需要很多的数学知识。如果你对数学紧张，那么你最好找点资料恶补一下。我试图将本书中涉及的数学知识阐述的尽量清晰。

如果数学对你来说很困难，别担心，你仍然可以使用本书的源代码。虽然理解引擎的各个部分对于你自己折腾它，修改它会更加得心应手，但是不需要完全理解里面的数学知识也可以做得很好。

为了方便你快速的索引，本书中的数学公式和方程都会收集在附录D中。

如果你是一个有经验的游戏开发者，那么这是一个很好的机会让你了解很多3D数学的知识：向量，矩阵和线性代数。如果你是一个相对新的开发者，这些话题对你可能有点困难。

我会假设本书的读者具备一定的数学知识，然后我会介绍其余用到的知识。如果你对自己的数学不是很自信，那么我建议你在开始前准备一本参考书或者查找一些网上的教程。

###你需要知道的数学知识
我假设所有物理引擎开发者都直到某些数学知识。

其中最为重要的知识是代数符号。我会直接用符号引入新的概念，如果你纵观全书，你会发现有很多公式。

我假设你能够轻松的阅读如下表达式：

![](/img/CodeCogsEqn.png)

能够理解x，t和θ这些变量，并能够用它们求解方程。

我也假设你有一定的代数知识，你应该知道，如果之前那个方程是正确的，那么可以得到

![](/img/CodeCogsEqn_1.png)

类似的代数转换在本书中会随处可见，且不会做额外解释。

最后我会假设你熟悉三角函数和直角坐标系，sines，cosines和tangents，以及它们和直角三角形，二维空间的关系。特别的，你需要知道下面公式：

![](/img/sin.png)   
![](/img/cos.png)  
![](/img/tan.png)

特别是当a等于1的时候，在书中我们会多次用到这个，同样不会做过多的解释。

###需要复习的数学知识
由于程序员的经验参差不齐，我能不期望你们对3D数学都有同样的了解。这些内容不是高中数学的内容，通常是非常专业的计算机图形学。如果你是非常有经验的游戏程序员了，那么你可以直接跳过这些回顾。

我们会在下一章讨论向量，包括三维坐标系和高中学习的二维几何间的关系。我们会复习向量的合（包括标量的和，点积），以及它们和三维空间中位置、方向间的关系。

我们还会复习矩阵。矩阵是用来变换向量的：空间中的移动或者改变它们的坐标系。我们还会看到在多个点之间的被叫作“张量”的矩阵，它有其他的用途但是相同的结构。我们会复习矩阵的数学操作，包括矩阵操作和变换向量，矩阵转置等。

这些话题是任何3D程序的基础，广泛的应用在图形开发和AI算法中。大多数读者可能对他们已经很熟悉了，另外有大量的书籍深入的讲解这些知识。

这些话题在本书中都会稍稍地复习一遍，并且我期望你们能够适应看到直接运用它们的结果。它们都是物理引擎开发的必要知识。所以不适合在每次用到的时候都解释一遍。

如果在后面的章节中，你遇到困难，你最好再重新复习下这些内容，或者去找些线性代数，计算机图形学更加全面的参考资料，学习学习。

###我们要引入的数学知识
最后有一些数学知识是你从来没有接触过的，除非你曾做过物理程序的开发。这些内容是我希望你知道并且会在书中着重讨论的。

在著名的波谱中包含一个四元数，一个类似向量的结构，用于表示物体在三维空间中的方向。我们会花点时间来弄明白为什么需要这么奇怪的结构，以及如何操作它：转换成一个矩阵，和其他四元数合并，旋转等等。

我们需要涉及向量微积分：向量随时间改变的方式。大多数的书籍中只需要简单的微积分--数值积分和第一阶微分。在18章我们会提到更加复杂的物理方法，运用了偏微分和微分算子。幸运的是我的物理引擎在那之前就完成了，所以那部分只是纯可选的内容。

最后，我们会讨论一些高级的矩阵操作。这类操作在图形开发中很少用到，所以我们只会在相应的章节做一定的讲解。